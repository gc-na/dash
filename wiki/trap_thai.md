# [ไทย] Debian Almquist Shell (dash) trap การใช้งาน: จัดการสัญญาณและการทำความสะอาด

## Overview
คำสั่ง `trap` ใน Dash ใช้สำหรับจัดการกับสัญญาณที่ส่งไปยังสคริปต์หรือโปรแกรม โดยสามารถกำหนดให้มีการดำเนินการบางอย่างเมื่อได้รับสัญญาณ เช่น การทำความสะอาดก่อนที่จะออกจากสคริปต์

## Usage
รูปแบบพื้นฐานของคำสั่ง `trap` คือ:

```sh
trap [options] [commands] [signals]
```

## Common Options
- `-l`: แสดงรายการของสัญญาณทั้งหมดที่สามารถใช้ได้
- `-p`: แสดงการตั้งค่าปัจจุบันของ trap สำหรับสัญญาณที่ระบุ

## Common Examples

### ตัวอย่างที่ 1: ทำความสะอาดเมื่อได้รับสัญญาณ INT
```sh
trap 'echo "ได้รับสัญญาณ INT"; exit' INT
while true; do
    echo "ทำงานอยู่..."
    sleep 1
done
```

### ตัวอย่างที่ 2: ทำความสะอาดเมื่อได้รับสัญญาณ TERM
```sh
trap 'echo "กำลังปิดโปรแกรม"; exit' TERM
while true; do
    echo "ทำงานอยู่..."
    sleep 1
done
```

### ตัวอย่างที่ 3: แสดงรายการสัญญาณทั้งหมด
```sh
trap -l
```

## Tips
- ใช้ `trap` เพื่อจัดการกับสัญญาณที่ไม่คาดคิด เช่น การยกเลิกหรือการปิดโปรแกรม เพื่อให้แน่ใจว่าโปรแกรมของคุณทำความสะอาดได้อย่างเหมาะสม
- ควรทดสอบสคริปต์ของคุณในสภาพแวดล้อมที่ปลอดภัยก่อนที่จะใช้งานจริง เพื่อให้มั่นใจว่าการจัดการสัญญาณทำงานตามที่คาดหวัง
- ใช้ `trap` ร่วมกับคำสั่ง `exit` เพื่อให้แน่ใจว่ามีการออกจากโปรแกรมอย่างเรียบร้อยเมื่อได้รับสัญญาณที่กำหนด